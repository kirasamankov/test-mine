<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Pixel MineDrop (Content)</title>
  <style>
    html,body{height:100%;margin:0;background:#6cc8ff;overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    #wrap{height:100%;display:flex;align-items:center;justify-content:center;padding:10px}
    canvas{
      image-rendering: pixelated;
      image-rendering: crisp-edges;
      border-radius:18px;
      box-shadow:0 30px 90px rgba(0,0,0,.35);
      outline: 2px solid rgba(0,0,0,.25);
      background:#6cc8ff;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#6cc8ff">
</head>
<body>
<div id="wrap"></div>

<script>
(() => {
  // ====== НАСТРОЙКИ КОНТЕНТА ======
  const ALWAYS_BIG = true;          // всегда жирный итог
  const CHESTS_ALWAYS_GOOD = true;  // сундуки чаще дают большие множители
  const CURRENCY = "₽";             // "₽" или "$" или "" (пусто)
  const BET = 100;                  // фейковая ставка

  // Разрешение "в пикселях" (Phaser потом растянет FIT-ом)
  // Так будет четкая пиксельная картинка как на твоем примере.
  const W = 360;
  const H = 640;

  const cfg = {
    type: Phaser.AUTO,
    parent: "wrap",
    width: W,
    height: H,
    backgroundColor: "#6cc8ff",
    pixelArt: true,
    scale: { mode: Phaser.Scale.FIT, autoCenter: Phaser.Scale.CENTER_BOTH },
    scene: { preload, create, update }
  };

  new Phaser.Game(cfg);

  // ====== ГЛОБАЛЬНОЕ ======
  let s; // scene
  let topCells = [];    // 5x3
  let blocks = [];      // 5x6
  let chests = [];      // 5
  let startBtn;
  let isRunning = false;

  let win = 0;
  let winDisplay = 0;

  // layout
  const TOP = { x: 24, y: 44, cols: 5, rows: 3, cw: 62, ch: 40, pad: 6 };
  const GRID = { x: 36, y: 200, cols: 5, rows: 6, cw: 56, ch: 56, pad: 0 };
  const CHEST_ROW_Y = 552;
  const WINBAR_Y = 600;

  // типы блоков (похожий набор как на скрине, но свои)
  const BLOCK_TYPES = [
    { key:"GRASS", hp:1, base:0x5fcf4a, accent:0x3ea536, mul:0 },
    { key:"DIRT",  hp:1, ba
